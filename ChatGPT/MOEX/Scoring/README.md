# MOEX Trading Prompts — Workflow README

Этот набор промптов — конвейер «аналитика → идея → сделка → разбор» для торговли акциями на MOEX с горизонтом до 4 месяцев.

## 0) Что внутри

Промпты (по файлам):

1. `1. Prompt_moex_single_stock_analisis.md` — генерация структурированного отчёта по акции.
2. `2. Prompt_analisis_to_idea_obsidian.md` — конвертация отчёта в одну **Idea**-заметку для Obsidian.
3. `3. Prompt_Idea_to_trade_obsidian.md` — создание **Trade**-заметки при фактическом входе.
4. `4. Promt_trade_to_review_obsidian.md` — создание **Review**-заметки после закрытия сделки.

## 1) Предварительная настройка (1 раз)

### 1.1 Obsidian: структура папок
Рекомендуемая структура vault:

```
MOEX/
  Ideas/
  Trades/
  Reviews/
  Journal/
  Templates/
```

### 1.2 Obsidian: плагины
Минимально:
- Templates (core)
- Dataview (community)
- Kanban (community) — опционально, но удобно для статусов идей

### 1.3 Kanban: доска идей
Создай `MOEX/Ideas/Ideas Board.md` и сделай 4 колонки:

- Planned
- Active
- Canceled
- Closed

В настройках доски включи:
- `Link cards to files`
- `Create new notes in folder: MOEX/Ideas`

> Важно: Kanban не обязан синхронизировать `status::` в YAML автоматически. Статус в заметке меняется вручную (или позже автоматизируется скриптом).

## 2) Общие правила дисциплины

1. **Отчёт ≠ сделка.** Отчёт — сырьё, Idea — решение, Trade — факт, Review — обучение.
2. **Один setup на идею.** Не смешивай «дивиденды + пробой + разворот» в одном плане.
3. **Entry/Stop/Target обязательны** для Idea и Trade.
4. **Не улучшай задним числом.** Любые отклонения фиксируй отдельным пунктом.

## 3) Процесс: когда какой промпт применять

### Шаг A — Анализ акции (Prompt 1)

**Когда использовать:**
- перед добавлением тикера в watchlist
- перед формированием новой торговой идеи
- при смене рыночной фазы/новостях/обновлении уровней

**Вход:**
- тикер
- текущая дата
- (опционально) депозит и лимит риска

**Выход:**
- структурированный отчёт: фундаментал (релевантный на 1–4 мес), техника (D+H4), новости/катализаторы, риск-менеджмент, сценарии, итоговый трейд-блок.

**Где хранить:**
- отдельной заметкой в `Journal/` (как «сырьё»), или
- вставлять в конец Idea как «appendix» (если хочется держать всё рядом).

### Шаг B — Из отчёта сделать Idea (Prompt 2)

**Когда использовать:**
- сразу после готового отчёта (Шаг A)
- когда отчёт уже содержит Entry/Stop/Targets и активный сценарий

**Вход:**
- полный текст отчёта

**Выход:**
- **одна** заметка Idea в markdown с YAML-полями:
  `ticker, date, direction, setup, entry, stop, target, riskR, status, tags`
  + блоки: `Гипотеза`, `Катализатор`, `Условия отмены`.

**Где хранить:**
- `MOEX/Ideas/<TICKER>_<YYYY-MM-DD>_<DIR>.md`

**Как завести в Kanban:**
- создавай карточку с тем же названием файла (или наоборот — через доску создавай файл).

### Шаг C — Когда вход выполнен: создать Trade (Prompt 3)

**Когда использовать:**
- только после фактического открытия позиции (цена достигла entry и ордер исполнен)

**Вход:**
- текст Idea
- фактическая цена входа, стоп, размер позиции (qty), комиссии/проскальзывание (если есть)

**Выход:**
- заметка Trade в markdown с YAML-полями:
  `ticker, date_entry, direction, setup, entry_price, stop, target, qty, risk_total, tags`
  + блоки: `Исполнение`, `Отклонения`, `План сопровождения`.

**Где хранить:**
- `MOEX/Trades/<TICKER>_<YYYY-MM-DD>_<DIR>_trade.md` (или любая единая схема)

**Связь с Idea:**
- в начале Trade добавь ссылку на Idea:
  `Idea: [[MTSS_2026-01-15_Long]]`

### Шаг D — После закрытия позиции: Review (Prompt 4)

**Когда использовать:**
- после полного закрытия сделки (частичное закрытие тоже можно, но лучше фиксировать явно)

**Вход:**
- Trade (с фактом входа/выхода) и результатом в R

**Выход:**
- Review-заметка с YAML:
  `date, ticker, setup, result_R, tags`
  + блоки: `Что произошло`, `Качество исполнения`, `Ошибка или подтверждение`, `Изменение правил`.

**Где хранить:**
- `MOEX/Reviews/<TICKER>_<YYYY-MM-DD>_review.md`

**Обязательный смысл Review:**
- отделить «плохой результат» от «плохого исполнения»
- менять правила только если это реально улучшает edge

## 4) Минимальные шаблоны названий и статусов

### Название Idea
Рекомендуется:

`<TICKER>_<YYYY-MM-DD>_<Long|Short>`

Пример: `MTSS_2026-01-15_Long`

### Статусы Idea (`status::`)
- Planned — идея сформирована, вход ещё не выполнен
- Active — позиция открыта или вход «в процессе» (по твоим правилам)
- Canceled — идея отменена по условиям отмены
- Closed — идея реализована и закрыта (дальше только Review)

## 5) Быстрые проверки качества (чек-лист)

Перед переводом Idea в Active:
- [ ] setup один и понятный
- [ ] entry/stop/target заданы
- [ ] riskR соответствует твоим правилам (обычно >= 2)
- [ ] «Условия отмены» описаны ценой/событием

Перед закрытием дня:
- [ ] все открытые позиции имеют Trade-заметку
- [ ] все закрытые позиции имеют Review-заметку

## 6) Типичные ошибки и как их избегать

1. **Idea без стопа** → запрещено: нет риска = нет сделки.
2. **Меняю setup после входа** → фиксируй как ошибка исполнения.
3. **Review превращается в эссе** → держи формат: факт → качество → вывод → правка правил.

## 7) Расширение: «автоматизировать» Obsidian ↔ Kanban без кода

Минимальная «автоматизация»:
- Создавай файлы Idea только через Kanban-доску.
- Название карточки = имя файла.
- Папка создания задана в настройках доски (`Create new notes in folder`).

Это почти исключает проблемы со ссылками и местоположением файлов.

## 8) Что дальше (опциональные улучшения)

- Dataview-дашборды:
  - Active ideas
  - статистика Avg R по setup
  - нарушения (где нет stop/target)
- Связка с Excel-журналом:
  - добавь в YAML поле `trade_id::` и используй один и тот же ID в Excel.
